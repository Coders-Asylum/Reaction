{"ast":null,"code":"import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { classNamesFunction, divProperties, memoizeFunction, getInitials, getNativeProps, getRTL, getPropsWithDefaults } from '../../../Utilities';\nimport { mergeStyles } from '../../../Styling';\nimport { PersonaPresence } from '../PersonaPresence/index';\nimport { Icon } from '../../../Icon';\nimport { Image, ImageFit, ImageLoadState } from '../../../Image';\nimport { PersonaPresence as PersonaPresenceEnum, PersonaSize } from '../Persona.types';\nimport { getPersonaInitialsColor } from '../PersonaInitialsColor';\nimport { sizeToPixels } from '../PersonaConsts';\nimport { useWarnings } from '@fluentui/react-hooks';\nvar getClassNames = classNamesFunction({\n  // There can be many PersonaCoin rendered with different sizes.\n  // Therefore setting a larger cache size.\n  cacheSize: 100\n});\nvar getInitialsStyles = memoizeFunction(function (className, initialsColor, initialsTextColor, text, primaryText, showUnknownPersonaCoin) {\n  return mergeStyles(className, !showUnknownPersonaCoin && {\n    backgroundColor: getPersonaInitialsColor({\n      text: text,\n      initialsColor: initialsColor,\n      primaryText: primaryText\n    }),\n    color: initialsTextColor\n  });\n});\nvar DEFAULT_PROPS = {\n  size: PersonaSize.size48,\n  presence: PersonaPresenceEnum.none,\n  imageAlt: ''\n};\n\nfunction useDebugWarnings(props) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: 'PersonaCoin',\n      props: props,\n      deprecations: {\n        primaryText: 'text'\n      }\n    });\n  }\n}\n\nfunction useImageLoadState(_a) {\n  var onPhotoLoadingStateChange = _a.onPhotoLoadingStateChange,\n      imageUrl = _a.imageUrl;\n\n  var _b = React.useState(ImageLoadState.notLoaded),\n      imageLoadState = _b[0],\n      setImageLoadstate = _b[1];\n\n  React.useEffect(function () {\n    setImageLoadstate(ImageLoadState.notLoaded);\n  }, [imageUrl]);\n\n  var onLoadingStateChange = function onLoadingStateChange(loadState) {\n    setImageLoadstate(loadState);\n    onPhotoLoadingStateChange === null || onPhotoLoadingStateChange === void 0 ? void 0 : onPhotoLoadingStateChange(loadState);\n  };\n\n  return [imageLoadState, onLoadingStateChange];\n}\n/**\n * PersonaCoin with no default styles.\n * [Use the `getStyles` API to add your own styles.](https://github.com/microsoft/fluentui/wiki/Styling)\n */\n\n\nexport var PersonaCoinBase = React.forwardRef(function (propsWithoutDefaults, forwardedRef) {\n  var props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n  useDebugWarnings(props);\n\n  var _a = useImageLoadState(props),\n      imageLoadState = _a[0],\n      onLoadingStateChange = _a[1];\n\n  var renderCoin = getCoinRenderer(onLoadingStateChange);\n  var className = props.className,\n      coinProps = props.coinProps,\n      showUnknownPersonaCoin = props.showUnknownPersonaCoin,\n      coinSize = props.coinSize,\n      styles = props.styles,\n      imageUrl = props.imageUrl,\n      initialsColor = props.initialsColor,\n      initialsTextColor = props.initialsTextColor,\n      isOutOfOffice = props.isOutOfOffice,\n      // eslint-disable-next-line deprecation/deprecation\n  _b = props.onRenderCoin,\n      // eslint-disable-next-line deprecation/deprecation\n  onRenderCoin = _b === void 0 ? renderCoin : _b,\n      // eslint-disable-next-line deprecation/deprecation\n  _c = props.onRenderPersonaCoin,\n      // eslint-disable-next-line deprecation/deprecation\n  onRenderPersonaCoin = _c === void 0 ? onRenderCoin : _c,\n      _d = props.onRenderInitials,\n      onRenderInitials = _d === void 0 ? renderPersonaCoinInitials : _d,\n      presence = props.presence,\n      presenceTitle = props.presenceTitle,\n      presenceColors = props.presenceColors,\n      // eslint-disable-next-line deprecation/deprecation\n  primaryText = props.primaryText,\n      showInitialsUntilImageLoads = props.showInitialsUntilImageLoads,\n      text = props.text,\n      theme = props.theme,\n      size = props.size;\n  var divProps = getNativeProps(props, divProperties);\n  var divCoinProps = getNativeProps(coinProps || {}, divProperties);\n  var coinSizeStyle = coinSize ? {\n    width: coinSize,\n    height: coinSize\n  } : undefined;\n  var hideImage = showUnknownPersonaCoin;\n  var personaPresenceProps = {\n    coinSize: coinSize,\n    isOutOfOffice: isOutOfOffice,\n    presence: presence,\n    presenceTitle: presenceTitle,\n    presenceColors: presenceColors,\n    size: size,\n    theme: theme\n  }; // Use getStyles from props, or fall back to getStyles from styles file.\n\n  var classNames = getClassNames(styles, {\n    theme: theme,\n    className: coinProps && coinProps.className ? coinProps.className : className,\n    size: size,\n    coinSize: coinSize,\n    showUnknownPersonaCoin: showUnknownPersonaCoin\n  });\n  var shouldRenderInitials = Boolean(imageLoadState !== ImageLoadState.loaded && (showInitialsUntilImageLoads && imageUrl || !imageUrl || imageLoadState === ImageLoadState.error || hideImage));\n  return React.createElement(\"div\", __assign({\n    role: \"presentation\"\n  }, divProps, {\n    className: classNames.coin,\n    ref: forwardedRef\n  }), // Render PersonaCoin if size is not size8. size10 and tiny need to removed after a deprecation cleanup.\n  // eslint-disable-next-line deprecation/deprecation\n  size !== PersonaSize.size8 && size !== PersonaSize.size10 && size !== PersonaSize.tiny ? React.createElement(\"div\", __assign({\n    role: \"presentation\"\n  }, divCoinProps, {\n    className: classNames.imageArea,\n    style: coinSizeStyle\n  }), shouldRenderInitials && React.createElement(\"div\", {\n    className: getInitialsStyles(classNames.initials, initialsColor, initialsTextColor, text, primaryText, showUnknownPersonaCoin),\n    style: coinSizeStyle,\n    \"aria-hidden\": \"true\"\n  }, onRenderInitials(props, renderPersonaCoinInitials)), !hideImage && onRenderPersonaCoin(props, renderCoin), React.createElement(PersonaPresence, __assign({}, personaPresenceProps))) : // Otherwise, render just PersonaPresence.\n  props.presence ? React.createElement(PersonaPresence, __assign({}, personaPresenceProps)) : // Just render Contact Icon if there isn't a Presence prop.\n  React.createElement(Icon, {\n    iconName: \"Contact\",\n    className: classNames.size10WithoutPresenceIcon\n  }), props.children);\n});\nPersonaCoinBase.displayName = 'PersonaCoinBase';\n\nvar getCoinRenderer = function getCoinRenderer(onLoadingStateChange) {\n  return function (_a) {\n    var coinSize = _a.coinSize,\n        styles = _a.styles,\n        imageUrl = _a.imageUrl,\n        imageAlt = _a.imageAlt,\n        imageShouldFadeIn = _a.imageShouldFadeIn,\n        imageShouldStartVisible = _a.imageShouldStartVisible,\n        theme = _a.theme,\n        showUnknownPersonaCoin = _a.showUnknownPersonaCoin,\n        _b = _a.size,\n        size = _b === void 0 ? DEFAULT_PROPS.size : _b; // Render the Image component only if an image URL is provided\n\n    if (!imageUrl) {\n      return null;\n    }\n\n    var classNames = getClassNames(styles, {\n      theme: theme,\n      size: size,\n      showUnknownPersonaCoin: showUnknownPersonaCoin\n    });\n    var dimension = coinSize || sizeToPixels[size];\n    return React.createElement(Image, {\n      className: classNames.image,\n      imageFit: ImageFit.cover,\n      src: imageUrl,\n      width: dimension,\n      height: dimension,\n      alt: imageAlt,\n      shouldFadeIn: imageShouldFadeIn,\n      shouldStartVisible: imageShouldStartVisible,\n      onLoadingStateChange: onLoadingStateChange\n    });\n  };\n};\n\nvar renderPersonaCoinInitials = function renderPersonaCoinInitials(_a) {\n  var imageInitials = _a.imageInitials,\n      allowPhoneInitials = _a.allowPhoneInitials,\n      showUnknownPersonaCoin = _a.showUnknownPersonaCoin,\n      text = _a.text,\n      // eslint-disable-next-line deprecation/deprecation\n  primaryText = _a.primaryText,\n      theme = _a.theme;\n\n  if (showUnknownPersonaCoin) {\n    return React.createElement(Icon, {\n      iconName: \"Help\"\n    });\n  }\n\n  var isRTL = getRTL(theme);\n  imageInitials = imageInitials || getInitials(text || primaryText || '', isRTL, allowPhoneInitials);\n  return imageInitials !== '' ? React.createElement(\"span\", null, imageInitials) : React.createElement(Icon, {\n    iconName: \"Contact\"\n  });\n};","map":{"version":3,"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SACEC,kBADF,EAEEC,aAFF,EAGEC,eAHF,EAIEC,WAJF,EAKEC,cALF,EAMEC,MANF,EAOEC,oBAPF,QAQO,oBARP;AASA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,SAASC,IAAT,QAAqB,eAArB;AACA,SAASC,KAAT,EAAgBC,QAAhB,EAA0BC,cAA1B,QAAgD,gBAAhD;AACA,SAA+BJ,eAAe,IAAIK,mBAAlD,EAAuEC,WAAvE,QAA0F,kBAA1F;AACA,SAASC,uBAAT,QAAwC,yBAAxC;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,WAAT,QAA4B,uBAA5B;AAQA,IAAMC,aAAa,GAAGlB,kBAAkB,CAA6C;AACnF;AACA;AACAmB,WAAS,EAAE;AAHwE,CAA7C,CAAxC;AAMA,IAAMC,iBAAiB,GAAGlB,eAAe,CACvC,UACEmB,SADF,EAEEC,aAFF,EAGEC,iBAHF,EAIEC,IAJF,EAKEC,WALF,EAMEC,sBANF,EAM6C;AAE3C,oBAAW,CACTL,SADS,EAET,CAACK,sBAAD,IAA2B;AACzBC,mBAAe,EAAEZ,uBAAuB,CAAC;AAAES,UAAI,MAAN;AAAQF,mBAAa,eAArB;AAAuBG,iBAAW;AAAlC,KAAD,CADf;AAEzBG,SAAK,EAAEL;AAFkB,GAFlB,CAAX;AAMC,CAfoC,CAAzC;AAkBA,IAAMM,aAAa,GAAG;AACpBC,MAAI,EAAEhB,WAAW,CAACiB,MADE;AAEpBC,UAAQ,EAAEnB,mBAAmB,CAACoB,IAFV;AAGpBC,UAAQ,EAAE;AAHU,CAAtB;;AAMA,SAASC,gBAAT,CAA0BC,KAA1B,EAAkD;AAChD,MAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC;AACAtB,eAAW,CAAC;AACVuB,UAAI,EAAE,aADI;AAEVJ,WAAK,OAFK;AAGVK,kBAAY,EAAE;AAAEhB,mBAAW,EAAE;AAAf;AAHJ,KAAD,CAAX;AAKD;AACF;;AAED,SAASiB,iBAAT,CAA2BC,EAA3B,EAAqF;MAAxDC,yBAAyB;MAAEC,QAAQ;;AACxD,WAAsC9C,KAAK,CAAC+C,QAAN,CAA+BlC,cAAc,CAACmC,SAA9C,CAAtC;AAAA,MAACC,cAAc,QAAf;AAAA,MAAiBC,iBAAiB,QAAlC;;AAENlD,OAAK,CAACmD,SAAN,CAAgB;AACdD,qBAAiB,CAACrC,cAAc,CAACmC,SAAhB,CAAjB;AACD,GAFD,EAEG,CAACF,QAAD,CAFH;;AAIA,MAAMM,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,SAAD,EAA0B;AACrDH,qBAAiB,CAACG,SAAD,CAAjB;AAEAR,6BAAyB,SAAzB,6BAAyB,WAAzB,GAAyB,MAAzB,4BAAyB,CAAGQ,SAAH,CAAzB;AACD,GAJD;;AAMA,SAAO,CAACJ,cAAD,EAAiBG,oBAAjB,CAAP;AACD;AAED;;;;;;AAIA,OAAO,IAAME,eAAe,GAA+CtD,KAAK,CAACuD,UAAN,CAGzE,UAACC,oBAAD,EAAuBC,YAAvB,EAAmC;AACnC,MAAMpB,KAAK,GAAG9B,oBAAoB,CAACuB,aAAD,EAAgB0B,oBAAhB,CAAlC;AAEApB,kBAAgB,CAACC,KAAD,CAAhB;;AAEM,WAAyCM,iBAAiB,CAACN,KAAD,CAA1D;AAAA,MAACY,cAAc,QAAf;AAAA,MAAiBG,oBAAoB,QAArC;;AAEN,MAAMM,UAAU,GAAGC,eAAe,CAACP,oBAAD,CAAlC;AAGE,eAAS,GAuBPf,KAAK,UAvBP;AAAA,MACAuB,SAAS,GAsBPvB,KAAK,UAvBP;AAAA,MAEAV,sBAAsB,GAqBpBU,KAAK,uBAvBP;AAAA,MAGAwB,QAAQ,GAoBNxB,KAAK,SAvBP;AAAA,MAIAyB,MAAM,GAmBJzB,KAAK,OAvBP;AAAA,MAKAS,QAAQ,GAkBNT,KAAK,SAvBP;AAAA,MAMAd,aAAa,GAiBXc,KAAK,cAvBP;AAAA,MAOAb,iBAAiB,GAgBfa,KAAK,kBAvBP;AAAA,MAQA0B,aAAa,GAeX1B,KAAK,cAvBP;AAAA,MASA;AACA2B,OAaE3B,KAAK,aAvBP;AAAA,MASA;AACA4B,cAAY,mBAAGP,UAAH,GAAaM,EAVzB;AAAA,MAWA;AACAE,OAWE7B,KAAK,oBAvBP;AAAA,MAWA;AACA8B,qBAAmB,mBAAGF,YAAH,GAAeC,EAZlC;AAAA,MAaAE,KAUE/B,KAAK,iBAvBP;AAAA,MAaAgC,gBAAgB,mBAAGC,yBAAH,GAA4BF,EAb5C;AAAA,MAcAnC,QAAQ,GASNI,KAAK,SAvBP;AAAA,MAeAkC,aAAa,GAQXlC,KAAK,cAvBP;AAAA,MAgBAmC,cAAc,GAOZnC,KAAK,eAvBP;AAAA,MAiBA;AACAX,aAAW,GAKTW,KAAK,YAvBP;AAAA,MAmBAoC,2BAA2B,GAIzBpC,KAAK,4BAvBP;AAAA,MAoBAZ,IAAI,GAGFY,KAAK,KAvBP;AAAA,MAqBAqC,KAAK,GAEHrC,KAAK,MAvBP;AAAA,MAsBAN,IAAI,GACFM,KAAK,KAvBP;AAyBF,MAAMsC,QAAQ,GAAGtE,cAAc,CAAuCgC,KAAvC,EAA8CnC,aAA9C,CAA/B;AACA,MAAM0E,YAAY,GAAGvE,cAAc,CAAuCuD,SAAS,IAAI,EAApD,EAAwD1D,aAAxD,CAAnC;AACA,MAAM2E,aAAa,GAAGhB,QAAQ,GAAG;AAAEiB,SAAK,EAAEjB,QAAT;AAAmBkB,UAAM,EAAElB;AAA3B,GAAH,GAA2CmB,SAAzE;AACA,MAAMC,SAAS,GAAGtD,sBAAlB;AAEA,MAAMuD,oBAAoB,GAA0B;AAClDrB,YAAQ,UAD0C;AAElDE,iBAAa,eAFqC;AAGlD9B,YAAQ,UAH0C;AAIlDsC,iBAAa,eAJqC;AAKlDC,kBAAc,gBALoC;AAMlDzC,QAAI,MAN8C;AAOlD2C,SAAK;AAP6C,GAApD,CAxCmC,CAkDnC;;AACA,MAAMS,UAAU,GAAGhE,aAAa,CAAC2C,MAAD,EAAS;AACvCY,SAAK,EAAEA,KADgC;AAEvCpD,aAAS,EAAEsC,SAAS,IAAIA,SAAS,CAACtC,SAAvB,GAAmCsC,SAAS,CAACtC,SAA7C,GAAyDA,SAF7B;AAGvCS,QAAI,MAHmC;AAIvC8B,YAAQ,UAJ+B;AAKvClC,0BAAsB;AALiB,GAAT,CAAhC;AAQA,MAAMyD,oBAAoB,GAAGC,OAAO,CAClCpC,cAAc,KAAKpC,cAAc,CAACyE,MAAlC,KACIb,2BAA2B,IAAI3B,QAAhC,IAA6C,CAACA,QAA9C,IAA0DG,cAAc,KAAKpC,cAAc,CAAC0E,KAA5F,IAAqGN,SADxG,CADkC,CAApC;AAKA,SACEjF;AAAKwF,QAAI,EAAC;AAAV,KAA6Bb,QAA7B,EAAqC;AAAErD,aAAS,EAAE6D,UAAU,CAACM,IAAxB;AAA8BC,OAAG,EAAEjC;AAAnC,GAArC,GAEI;AACA;AACA1B,MAAI,KAAKhB,WAAW,CAAC4E,KAArB,IAA8B5D,IAAI,KAAKhB,WAAW,CAAC6E,MAAnD,IAA6D7D,IAAI,KAAKhB,WAAW,CAAC8E,IAAlF,GACE7F;AAAKwF,QAAI,EAAC;AAAV,KAA6BZ,YAA7B,EAAyC;AAAEtD,aAAS,EAAE6D,UAAU,CAACW,SAAxB;AAAmCC,SAAK,EAAElB;AAA1C,GAAzC,GACGO,oBAAoB,IACnBpF;AACEsB,aAAS,EAAED,iBAAiB,CAC1B8D,UAAU,CAACa,QADe,EAE1BzE,aAF0B,EAG1BC,iBAH0B,EAI1BC,IAJ0B,EAK1BC,WAL0B,EAM1BC,sBAN0B,CAD9B;AASEoE,SAAK,EAAElB,aATT;AASsB,mBACR;AAVd,KAYGR,gBAAgB,CAAChC,KAAD,EAAQiC,yBAAR,CAZnB,CAFJ,EAiBG,CAACW,SAAD,IAAcd,mBAAmB,CAAC9B,KAAD,EAAQqB,UAAR,CAjBpC,EAkBE1D,oBAACS,eAAD,EAAgBwF,aAAKf,oBAAL,CAAhB,CAlBF,CADF,GAqBI;AACJ7C,OAAK,CAACJ,QAAN,GACEjC,oBAACS,eAAD,EAAgBwF,aAAKf,oBAAL,CAAhB,CADF,GAGE;AACAlF,sBAACU,IAAD,EAAK;AAACwF,YAAQ,EAAC,SAAV;AAAoB5E,aAAS,EAAE6D,UAAU,CAACgB;AAA1C,GAAL,CA9BN,EAiCG9D,KAAK,CAAC+D,QAjCT,CADF;AAqCD,CAxG0E,CAApE;AAyGP9C,eAAe,CAAC+C,WAAhB,GAA8B,iBAA9B;;AAEA,IAAM1C,eAAe,GAAG,SAAlBA,eAAkB,CAACP,oBAAD,EAA0D;AAAK,mBAACR,EAAD,EAUnE;QATlBiB,QAAQ;QACRC,MAAM;QACNhB,QAAQ;QACRX,QAAQ;QACRmE,iBAAiB;QACjBC,uBAAuB;QACvB7B,KAAK;QACL/C,sBAAsB;QACtBqC;QAAAjC,IAAI,mBAAGD,aAAa,CAACC,IAAjB,GAAqBiC,GACP,CAClB;;AACA,QAAI,CAAClB,QAAL,EAAe;AACb,aAAO,IAAP;AACD;;AACD,QAAMqC,UAAU,GAAGhE,aAAa,CAAC2C,MAAD,EAAS;AACvCY,WAAK,EAAEA,KADgC;AAEvC3C,UAAI,MAFmC;AAGvCJ,4BAAsB;AAHiB,KAAT,CAAhC;AAKA,QAAM6E,SAAS,GAAG3C,QAAQ,IAAI5C,YAAY,CAACc,IAAD,CAA1C;AACA,WACE/B,oBAACW,KAAD,EAAM;AACJW,eAAS,EAAE6D,UAAU,CAACsB,KADlB;AAEJC,cAAQ,EAAE9F,QAAQ,CAAC+F,KAFf;AAGJC,SAAG,EAAE9D,QAHD;AAIJgC,WAAK,EAAE0B,SAJH;AAKJzB,YAAM,EAAEyB,SALJ;AAMJK,SAAG,EAAE1E,QAND;AAOJ2E,kBAAY,EAAER,iBAPV;AAQJS,wBAAkB,EAAER,uBARhB;AASJnD,0BAAoB,EAAEA;AATlB,KAAN,CADF;AAaD,GAlCsF;AAkCtF,CAlCD;;AAoCA,IAAMkB,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAC1B,EAAD,EAQd;MAPlBoE,aAAa;MACbC,kBAAkB;MAClBtF,sBAAsB;MACtBF,IAAI;MACJ;AACAC,aAAW;MACXgD,KAAK;;AAEL,MAAI/C,sBAAJ,EAA4B;AAC1B,WAAO3B,oBAACU,IAAD,EAAK;AAACwF,cAAQ,EAAC;AAAV,KAAL,CAAP;AACD;;AAED,MAAMgB,KAAK,GAAG5G,MAAM,CAACoE,KAAD,CAApB;AAEAsC,eAAa,GAAGA,aAAa,IAAI5G,WAAW,CAACqB,IAAI,IAAIC,WAAR,IAAuB,EAAxB,EAA4BwF,KAA5B,EAAmCD,kBAAnC,CAA5C;AAEA,SAAOD,aAAa,KAAK,EAAlB,GAAuBhH,kCAAOgH,aAAP,CAAvB,GAAsDhH,oBAACU,IAAD,EAAK;AAACwF,YAAQ,EAAC;AAAV,GAAL,CAA7D;AACD,CAlBD","names":["React","classNamesFunction","divProperties","memoizeFunction","getInitials","getNativeProps","getRTL","getPropsWithDefaults","mergeStyles","PersonaPresence","Icon","Image","ImageFit","ImageLoadState","PersonaPresenceEnum","PersonaSize","getPersonaInitialsColor","sizeToPixels","useWarnings","getClassNames","cacheSize","getInitialsStyles","className","initialsColor","initialsTextColor","text","primaryText","showUnknownPersonaCoin","backgroundColor","color","DEFAULT_PROPS","size","size48","presence","none","imageAlt","useDebugWarnings","props","process","env","NODE_ENV","name","deprecations","useImageLoadState","_a","onPhotoLoadingStateChange","imageUrl","useState","notLoaded","imageLoadState","setImageLoadstate","useEffect","onLoadingStateChange","loadState","PersonaCoinBase","forwardRef","propsWithoutDefaults","forwardedRef","renderCoin","getCoinRenderer","coinProps","coinSize","styles","isOutOfOffice","_b","onRenderCoin","_c","onRenderPersonaCoin","_d","onRenderInitials","renderPersonaCoinInitials","presenceTitle","presenceColors","showInitialsUntilImageLoads","theme","divProps","divCoinProps","coinSizeStyle","width","height","undefined","hideImage","personaPresenceProps","classNames","shouldRenderInitials","Boolean","loaded","error","role","coin","ref","size8","size10","tiny","imageArea","style","initials","__assign","iconName","size10WithoutPresenceIcon","children","displayName","imageShouldFadeIn","imageShouldStartVisible","dimension","image","imageFit","cover","src","alt","shouldFadeIn","shouldStartVisible","imageInitials","allowPhoneInitials","isRTL"],"sources":["/home/runner/work/Reaction/Reaction/employee-info/node_modules/@fluentui/react/lib/components/Persona/src/components/Persona/PersonaCoin/PersonaCoin.base.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  classNamesFunction,\n  divProperties,\n  memoizeFunction,\n  getInitials,\n  getNativeProps,\n  getRTL,\n  getPropsWithDefaults,\n} from '../../../Utilities';\nimport { mergeStyles } from '../../../Styling';\nimport { PersonaPresence } from '../PersonaPresence/index';\nimport { Icon } from '../../../Icon';\nimport { Image, ImageFit, ImageLoadState } from '../../../Image';\nimport { PersonaInitialsColor, PersonaPresence as PersonaPresenceEnum, PersonaSize } from '../Persona.types';\nimport { getPersonaInitialsColor } from '../PersonaInitialsColor';\nimport { sizeToPixels } from '../PersonaConsts';\nimport { useWarnings } from '@fluentui/react-hooks';\nimport type {\n  IPersonaCoinProps,\n  IPersonaCoinStyleProps,\n  IPersonaCoinStyles,\n  IPersonaPresenceProps,\n} from '../Persona.types';\n\nconst getClassNames = classNamesFunction<IPersonaCoinStyleProps, IPersonaCoinStyles>({\n  // There can be many PersonaCoin rendered with different sizes.\n  // Therefore setting a larger cache size.\n  cacheSize: 100,\n});\n\nconst getInitialsStyles = memoizeFunction(\n  (\n    className: string,\n    initialsColor: PersonaInitialsColor | string | undefined,\n    initialsTextColor: string | undefined,\n    text: string | undefined,\n    primaryText: string | undefined,\n    showUnknownPersonaCoin: boolean | undefined,\n  ) =>\n    mergeStyles(\n      className,\n      !showUnknownPersonaCoin && {\n        backgroundColor: getPersonaInitialsColor({ text, initialsColor, primaryText }),\n        color: initialsTextColor,\n      },\n    ),\n);\n\nconst DEFAULT_PROPS = {\n  size: PersonaSize.size48,\n  presence: PersonaPresenceEnum.none,\n  imageAlt: '',\n};\n\nfunction useDebugWarnings(props: IPersonaCoinProps) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: 'PersonaCoin',\n      props,\n      deprecations: { primaryText: 'text' },\n    });\n  }\n}\n\nfunction useImageLoadState({ onPhotoLoadingStateChange, imageUrl }: IPersonaCoinProps) {\n  const [imageLoadState, setImageLoadstate] = React.useState<ImageLoadState>(ImageLoadState.notLoaded);\n\n  React.useEffect(() => {\n    setImageLoadstate(ImageLoadState.notLoaded);\n  }, [imageUrl]);\n\n  const onLoadingStateChange = (loadState: ImageLoadState) => {\n    setImageLoadstate(loadState);\n\n    onPhotoLoadingStateChange?.(loadState);\n  };\n\n  return [imageLoadState, onLoadingStateChange] as const;\n}\n\n/**\n * PersonaCoin with no default styles.\n * [Use the `getStyles` API to add your own styles.](https://github.com/microsoft/fluentui/wiki/Styling)\n */\nexport const PersonaCoinBase: React.FunctionComponent<IPersonaCoinProps> = React.forwardRef<\n  HTMLDivElement,\n  IPersonaCoinProps\n>((propsWithoutDefaults, forwardedRef) => {\n  const props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n\n  useDebugWarnings(props);\n\n  const [imageLoadState, onLoadingStateChange] = useImageLoadState(props);\n\n  const renderCoin = getCoinRenderer(onLoadingStateChange);\n\n  const {\n    className,\n    coinProps,\n    showUnknownPersonaCoin,\n    coinSize,\n    styles,\n    imageUrl,\n    initialsColor,\n    initialsTextColor,\n    isOutOfOffice,\n    // eslint-disable-next-line deprecation/deprecation\n    onRenderCoin = renderCoin,\n    // eslint-disable-next-line deprecation/deprecation\n    onRenderPersonaCoin = onRenderCoin,\n    onRenderInitials = renderPersonaCoinInitials,\n    presence,\n    presenceTitle,\n    presenceColors,\n    // eslint-disable-next-line deprecation/deprecation\n    primaryText,\n    showInitialsUntilImageLoads,\n    text,\n    theme,\n    size,\n  } = props;\n\n  const divProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(props, divProperties);\n  const divCoinProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(coinProps || {}, divProperties);\n  const coinSizeStyle = coinSize ? { width: coinSize, height: coinSize } : undefined;\n  const hideImage = showUnknownPersonaCoin;\n\n  const personaPresenceProps: IPersonaPresenceProps = {\n    coinSize,\n    isOutOfOffice,\n    presence,\n    presenceTitle,\n    presenceColors,\n    size,\n    theme,\n  };\n\n  // Use getStyles from props, or fall back to getStyles from styles file.\n  const classNames = getClassNames(styles, {\n    theme: theme!,\n    className: coinProps && coinProps.className ? coinProps.className : className,\n    size,\n    coinSize,\n    showUnknownPersonaCoin,\n  });\n\n  const shouldRenderInitials = Boolean(\n    imageLoadState !== ImageLoadState.loaded &&\n      ((showInitialsUntilImageLoads && imageUrl) || !imageUrl || imageLoadState === ImageLoadState.error || hideImage),\n  );\n\n  return (\n    <div role=\"presentation\" {...divProps} className={classNames.coin} ref={forwardedRef}>\n      {\n        // Render PersonaCoin if size is not size8. size10 and tiny need to removed after a deprecation cleanup.\n        // eslint-disable-next-line deprecation/deprecation\n        size !== PersonaSize.size8 && size !== PersonaSize.size10 && size !== PersonaSize.tiny ? (\n          <div role=\"presentation\" {...divCoinProps} className={classNames.imageArea} style={coinSizeStyle}>\n            {shouldRenderInitials && (\n              <div\n                className={getInitialsStyles(\n                  classNames.initials,\n                  initialsColor,\n                  initialsTextColor,\n                  text,\n                  primaryText,\n                  showUnknownPersonaCoin,\n                )}\n                style={coinSizeStyle}\n                aria-hidden=\"true\"\n              >\n                {onRenderInitials(props, renderPersonaCoinInitials)}\n              </div>\n            )}\n            {!hideImage && onRenderPersonaCoin(props, renderCoin)}\n            <PersonaPresence {...personaPresenceProps} />\n          </div>\n        ) : // Otherwise, render just PersonaPresence.\n        props.presence ? (\n          <PersonaPresence {...personaPresenceProps} />\n        ) : (\n          // Just render Contact Icon if there isn't a Presence prop.\n          <Icon iconName=\"Contact\" className={classNames.size10WithoutPresenceIcon} />\n        )\n      }\n      {props.children}\n    </div>\n  );\n});\nPersonaCoinBase.displayName = 'PersonaCoinBase';\n\nconst getCoinRenderer = (onLoadingStateChange: (loadState: ImageLoadState) => void) => ({\n  coinSize,\n  styles,\n  imageUrl,\n  imageAlt,\n  imageShouldFadeIn,\n  imageShouldStartVisible,\n  theme,\n  showUnknownPersonaCoin,\n  size = DEFAULT_PROPS.size,\n}: IPersonaCoinProps): JSX.Element | null => {\n  // Render the Image component only if an image URL is provided\n  if (!imageUrl) {\n    return null;\n  }\n  const classNames = getClassNames(styles, {\n    theme: theme!,\n    size,\n    showUnknownPersonaCoin,\n  });\n  const dimension = coinSize || sizeToPixels[size];\n  return (\n    <Image\n      className={classNames.image}\n      imageFit={ImageFit.cover}\n      src={imageUrl}\n      width={dimension}\n      height={dimension}\n      alt={imageAlt}\n      shouldFadeIn={imageShouldFadeIn}\n      shouldStartVisible={imageShouldStartVisible}\n      onLoadingStateChange={onLoadingStateChange}\n    />\n  );\n};\n\nconst renderPersonaCoinInitials = ({\n  imageInitials,\n  allowPhoneInitials,\n  showUnknownPersonaCoin,\n  text,\n  // eslint-disable-next-line deprecation/deprecation\n  primaryText,\n  theme,\n}: IPersonaCoinProps): JSX.Element => {\n  if (showUnknownPersonaCoin) {\n    return <Icon iconName=\"Help\" />;\n  }\n\n  const isRTL = getRTL(theme);\n\n  imageInitials = imageInitials || getInitials(text || primaryText || '', isRTL, allowPhoneInitials);\n\n  return imageInitials !== '' ? <span>{imageInitials}</span> : <Icon iconName=\"Contact\" />;\n};\n"]},"metadata":{},"sourceType":"module"}